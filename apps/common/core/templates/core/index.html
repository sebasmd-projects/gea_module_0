{% extends 'raw.html' %}

{% load static i18n %}

{% block icons %}
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" as="style" onload="this.onload=null;this.rel='stylesheet'" />

  <noscript>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />
  </noscript>

  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.29.0/feather.min.js" crossorigin="anonymous"></script>

  <script defer src="https://kit.fontawesome.com/aa367a5aee.js" crossorigin="anonymous"></script>
{% endblock %}

{% block title %}
  {% trans 'Secure platform for historical assets' as gea_title %}
  <!-- Title (60 caracteres) -->
  <title>GEA | {{ gea_title }}</title>
{% endblock %}

{% block meta %}
  {% trans 'Secure platform for historical assets' as gea_title %}
  <!-- Robots -->
  <meta content="noindex, nofollow, noarchive" name="robots" />
  <meta content="noindex, nofollow, noarchive" name="googlebot" />

  <!-- Title (60 caracteres) -->
  <meta name="title" content="GEA | {{ gea_title }}" />

  <!-- Description (155 160 caracteres) -->
  <meta name="description" content="{% trans 'Comprehensive, exclusive and secure platform for buying and selling historical assets. Official U.S. purchasing platform.' %}" />

  <!-- Keywords (no muy usado, opcional) -->
  <meta name="keywords" content="GEA, historical assets, secure platform, legal, US assets" />

  <!-- Open Graph / Facebook -->
  <meta property="og:locale" content="{{ LANGUAGE_CODE }}" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="GEA INTERNATIONAL PRIVATE CONSORTIUM" />
  <meta property="og:title" content="GEA | {{ gea_title }}" />
  <meta property="og:description" content="{% trans 'Official and exclusive platform for the purchase and sale of US historical assets.' %}" />
  <meta property="og:url" content="https://geausa.propensionesabogados.com/" />
  <meta property="og:image" content="{% static 'assets/imgs/logos/gea_logo.webp' %}" />
  <meta property="og:image:type" content="image/webp" />
  <meta property="og:image:alt" content="GEA Logo" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@GEA" />
  <meta name="twitter:creator" content="@GEA" />
  <meta name="twitter:title" content="GEA | {{ gea_title }}" />
  <meta name="twitter:description" content="{% trans 'Exclusive and official platform for the secure purchase of US historical assets.' %}" />
  <meta name="twitter:image" content="{% static 'assets/imgs/logos/gea_logo.webp' %}" />
  <meta name="twitter:image:alt" content="GEA Logo" />

  <!-- Mobile -->
  <meta name="theme-color" content="#ffffff" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="GEA" />
{% endblock %}

{% block prefetch_preconnect %}
  <link rel="preconnect" href="https://propensionesabogados.com" crossorigin />
  <link rel="dns-prefetch" href="//propensionesabogados.com" />
{% endblock %}

{% block body_properties %}
  class="nav-fixed"
{% endblock %}

{% block header %}
  {% include 'core/partials/core_nav.html' %}
{% endblock %}

{% block main %}
  <style>
    /* Wrapper centrado */
    .hero-standby-wrapper {
      position: absolute;
      inset: 0;
      z-index: 3;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
    }
    
    /* Card 400x400 max, con scroll interno */
    .hero-standby-card {
      pointer-events: auto;
      position: relative;
    
      background: rgba(255, 255, 255, 0.29);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
    
      border-radius: 15px;
      padding: 0.5rem 0.5rem;
    
      width: min(400px, calc(100% - 2rem));
      max-height: 350px;
      overflow: auto;
    
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.25);
    }
    
    /* Tipografía */
    .hero-standby-card h2 {
      letter-spacing: 0.1em;
      margin-bottom: 0.1rem;
      font-size: 1.0rem;
    }
    
    .hero-standby-card p {
      margin-bottom: 0.3rem;
      color: #1a1a1a;
      font-size: 0.8rem;
    }
    
    .hero-standby-card a {
      color: #0d6efd;
      text-decoration: underline;
    }
    
    /* Botón X */
    .hero-standby-close {
      position: absolute;
      top: 10px;
      right: 10px;
    
      width: 32px;
      height: 32px;
      border-radius: 999px;
    
      border: 1px solid rgba(0, 0, 0, 0.15);
      background: rgba(255, 255, 255, 0.9);
      color: #111;
    
      display: inline-flex;
      align-items: center;
      justify-content: center;
    
      cursor: pointer;
      line-height: 1;
      font-size: 18px;
    
      transition: transform 120ms ease, background 120ms ease;
    }
    
    .hero-standby-close:hover {
      transform: scale(1.03);
      background: rgba(61, 61, 61, 0.01);
    }
    
    /* Ocultar wrapper completo cuando se cierre */
    .hero-standby-wrapper.is-hidden {
      display: none;
    }
    
    /* Móvil: un poco menos padding */
    @media (max-width: 576px) {
      .hero-standby-card {
        padding: 1.5rem 1.25rem;
      }
    }
  </style>
  {% include 'core/partials/whatsapp.html' %}
  <main class="main">
    <!-- Hero Section -->
    <div id="hero" class="hero">
      <div class="hero-video">
        <video id="hero-video" muted loop playsinline preload="none" poster="{% static 'assets/imgs/hero-poster.webp' %}">
          <!-- Video para móviles (9:16) -->
          <source data-src="{% static 'assets/video/hero-video-mobile.mp4' %}" type="video/mp4" media="(max-width: 425px)" />

          <!-- Video para pantallas grandes (16:9) -->
          <source data-src="{% static 'assets/video/hero-video.mp4' %}" type="video/mp4" media="(min-width: 426px)" />
          {% trans 'Your browser does not support HTML5 video.' %}
        </video>
      </div>

      <div class="hero-standby-wrapper" id="heroStandbyWrapper">
        <div class="hero-standby-card">
          <button type="button" class="hero-standby-close" id="heroStandbyClose" aria-label="{% trans 'Close' %}">&times;</button>

          <h2 class="fw-semibold text-center">{% trans 'ACTIVE STANDBY MODE' %}</h2>

          <p>
            {% blocktrans %}By order of the General Director and by virtue of Internal Resolution No.
            <a href="https://propensionesabogados.com/INTERNAL_RESOLUTION_No_PI_X92_003_2026.pdf" target="_blank" rel="noopener noreferrer">PI-X92-003-2026</a>, issued by Propensiones Abogados Internacional S.A.S.{% endblocktrans %}
          </p>

          <p>
            {% trans 'The platform remains active in strategic standby mode, with limited functionality and restricted access.' %}
          </p>

          <p>
            {% trans 'Its full reactivation will depend on direct orders from the legal high command.' %}
          </p>

          <p class="text-muted text-center mb-0">
            <small>{% trans '"Only those who master time, master the outcome."' %}</small>
          </p>
        </div>
      </div>
    </div>

    <!-- /Hero Section -->
  </main>
{% endblock %}

{% block custom_css %}
  <link rel="stylesheet" href="{% static 'css/hero.css' %}" />
  <link rel="stylesheet" href="{% static 'css/gradient_button.css' %}" />
{% endblock %}

{% block custom_js %}
  <script defer src="{% static 'js/scripts.js' %}"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const wrapper = document.getElementById('heroStandbyWrapper')
      const closeBtn = document.getElementById('heroStandbyClose')
      if (!wrapper || !closeBtn) return
    
      closeBtn.addEventListener('click', function () {
        wrapper.classList.add('is-hidden')
      })
    })
  </script>

  <script>
    // Lazy load del video del hero
    document.addEventListener('DOMContentLoaded', function () {
      const video = document.getElementById('hero-video')
      if (!video) return
    
      function loadHeroVideo() {
        if (video.dataset.loaded) return
        video.dataset.loaded = '1'
    
        const sources = video.querySelectorAll('source[data-src]')
        sources.forEach(function (s) {
          s.src = s.dataset.src
          s.removeAttribute('data-src')
        })
    
        // Forzar recarga del video cuando ya tiene los src
        video.load()
        video.play().catch(function () {
          // algunos navegadores bloquean autoplay, no pasa nada
        })
      }
    
      if ('IntersectionObserver' in window) {
        const observer = new IntersectionObserver(
          function (entries) {
            entries.forEach(function (entry) {
              if (entry.isIntersecting) {
                loadHeroVideo()
                observer.disconnect()
              }
            })
          },
          { threshold: 0.3 }
        )
    
        observer.observe(video)
      } else {
        setTimeout(loadHeroVideo, 1500)
      }
    })
  </script>

  <script>
    ;(function () {
      const HREF = 'https://propensionesabogados.com/'
      let injected = false
      function injectPrefetch() {
        if (injected) return
        injected = true
        try {
          const l = document.createElement('link')
          l.rel = 'prefetch'
          l.href = HREF
          l.as = 'document'
          document.head.appendChild(l)
        } catch (e) {
          console.error('Error injecting prefetch link:', e)
        }
      }
      // guarda la función para llamar al hacer hover en el botón
      window.__prefetchPropensiones = injectPrefetch
      // prefetch en idle del navegador
      if ('requestIdleCallback' in window) {
        requestIdleCallback(injectPrefetch, { timeout: 2500 })
      } else {
        setTimeout(injectPrefetch, 2000)
      }
    })()
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const whatsappButton = document.getElementById('whatsapp-button')
    
      function toggleWhatsappText() {
        if (window.scrollY > 100) {
          whatsappButton.classList.add('scrolled')
        } else {
          whatsappButton.classList.remove('scrolled')
        }
      }
    
      // Escuchar eventos de scroll
      document.addEventListener('scroll', toggleWhatsappText)
      window.addEventListener('load', toggleWhatsappText)
    })
  </script>
{% endblock %}
