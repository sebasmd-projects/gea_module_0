{% load static i18n %}

<div class="timeline-item">
  <div class="timeline-item-marker">
    <div class="
      timeline-item-marker-indicator
      {% if offer.created and offer.reviewed_by_timestamp and offer.approved_by_timestamp %}
        bg-success-soft text-success
      {% elif offer.created or offer.reviewed_by_timestamp or offer.approved_by_timestamp %}
        bg-warning-soft text-warning
      {% else %}
        bg-danger-soft text-danger
      {% endif %}
    ">
      <i data-feather="shopping-bag"></i>
    </div>
  </div>
  <div class="timeline-item-content">
    <p class="text-dark">
      {% trans 'Purchase Order' %}
    </p>

    <div class="timeline timeline-xs">
      {# Created #}
      <div class="timeline-item">
        <div class="timeline-item-marker">
          <div class="timeline-item-marker-indicator {{ offer.created|yesno:'bg-success,bg-danger' }}"></div>
        </div>
        <div class="timeline-item-content">
          {% trans 'Purchase Order Created' %}<br />
          {{ offer.created|date:'d/m/Y H:i'|default:'...' }}<br />
          {% if request.user.is_buyer or request.user.is_superuser %}
            {% if offer.created_by %}
              <small>@{{ offer.created_by.get_full_name|default:offer.created_by.username }}</small>
            {% endif %}
          {% endif %}
        </div>
      </div>

      {# Reviewed #}
      <div class="timeline-item">
        <div class="timeline-item-marker">
          <div class="timeline-item-marker-indicator {{ offer.reviewed_by_timestamp|yesno:'bg-success,bg-danger' }}"></div>
        </div>
        <div class="timeline-item-content">
          {% trans 'Purchase Order Reviewed' %}<br />
          {{ offer.reviewed_by_timestamp|date:'d/m/Y H:i'|default:'...' }}<br />
          {% if request.user.is_buyer or request.user.is_superuser %}
            {% if offer.reviewed_by %}
              <small>@{{ offer.reviewed_by.get_full_name|default:offer.reviewed_by.username }}</small>
            {% endif %}
          {% endif %}
        </div>
      </div>

      {# Approved #}
      <div class="timeline-item">
        <div class="timeline-item-marker">
          <div class="timeline-item-marker-indicator {{ offer.approved_by_timestamp|yesno:'bg-success,bg-danger' }}"></div>
        </div>
        <div class="timeline-item-content">
          {% trans 'Purchase Order Approved' %}<br />
          {{ offer.approved_by_timestamp|date:'d/m/Y H:i'|default:'...' }}<br />
          {% if request.user.is_buyer or request.user.is_superuser %}
            {% if offer.approved_by %}
              <small>@{{ offer.approved_by.get_full_name|default:offer.approved_by.username }}</small>
            {% endif %}
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
