{% extends 'two_factor/_base.html' %}

{% load i18n %}

{% load two_factor_tags %}

{% block layout_content %}
  <div class="min-vh-100 d-flex align-items-center justify-content-center container-xl px-5">
    <div class="card mx-auto" style="max-width: 600px; width: 100%;">
      <div class="card-header text-center">
        <a href="{% url 'core:index' %}"><img src="https://geausa.propensionesabogados.com/public/static/assets/imgs/logos/gea_logo_gold.webp" class="card-img-top img-fluid" alt="..." style="max-width: fit-content;" /></a>
      </div>

      <div class="card-body">

        <p>
          {% blocktrans trimmed %}Backup tokens can be used when your primary method is not available.{% endblocktrans %}
        </p>

        {% if device.token_set.count %}
        <p>
          {% blocktrans trimmed %}The backup tokens below can be used for login verification. If you've used up all your backup tokens, you can generate a new set of backup tokens.{% endblocktrans %}
        </p>

        <p>
          {% blocktrans trimmed %}Only the backup tokens shown below will be valid.{% endblocktrans %}
        </p>

          <ul>
            {% for token in device.token_set.all %}
              <li>{{ token.token }}</li>
            {% endfor %}
          </ul>
          <p>
            {% blocktrans %}Copy these tokens and keep them somewhere safe.{% endblocktrans %}
          </p>
        {% else %}
          <p>
            {% trans "You don't have any backup codes yet." %}
          </p>
        {% endif %}

        <form method="post">
          {% csrf_token %}{{ form.as_p }}
          <a href="{% url 'two_factor:profile' %}" class="float-right btn btn-link">{% trans 'Back to Account Security' %}</a>
          <button class="btn btn-primary mt-2" type="submit">{% trans 'Generate Tokens' %}</button>
        </form>
      </div>
    </div>
  </div>
{% endblock %}
